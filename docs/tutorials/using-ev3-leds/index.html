
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Using the EV3 LEDs</title>
    
    <!-- Description content not available -->
    
    <link rel="alternate" type="application/atom+xml" href="/ev3dev.github.io/news/atom.xml" title="Atom feed">
    <link rel="icon" href="/ev3dev.github.io/favicon.ico" />

    <!-- Bootstrap styles -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/ev3dev.github.io/stylesheets/bootstrap.css">

    <!-- Custom styles -->
    <link rel="stylesheet" href="/ev3dev.github.io/stylesheets/site-structure.css">
    <link rel="stylesheet" href="/ev3dev.github.io/stylesheets/landing-content.css">

    <!-- Template for search results -->
    <script type="text/html" id="search-result-template">
        <div class="search-result">
            <a data-href="href"><h4 data-content="title"></h4></a>
            <span data-content="breadcrumbs" class="search-result-breadcrumbs"></span>
            <span data-content="author" class="search-result-author"></span><br/>
        </div>
    </script>

    

    
        <!-- Google Analytics excluded: not an official site build -->
    
</head>


<body class="no-jumbotron ">

    <div id="header">
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse" aria-expanded="false">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/ev3dev.github.io/">
                    <img id="brand-logo" src="/ev3dev.github.io/images/ev3dev_logo_white.png" alt="ev3dev logo" />
                </a>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav" id="main-nav">
                    <li>
                        <a href="/ev3dev.github.io/docs/getting-started" title="Our Getting Started guide">Start Here</a>
                    </li>
                    <li>
                        <a href="/ev3dev.github.io/downloads" title="SD card images for ev3dev">Downloads</a>
                    </li>
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" title="Documentation on using ev3dev">
                            Documentation
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="/ev3dev.github.io/docs/tutorials">Tutorials</a>
                            </li>
                            <li>
                                <a href="/ev3dev.github.io/docs/programming-languages">Programming Languages</a>
                            </li>
                            <li>
                                <a href="/ev3dev.github.io/docs/networking">Networking</a>
                            </li>
                            <li>
                                <a href="http://docs.ev3dev.org/projects/lego-linux-drivers/en/ev3dev-stretch/">
                                    Hardware Drivers
                                    <i class="fa fa-external-link external-link-nav-icon" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li role="separator" class="divider"></li>
                            <li>
                                <a href="https://github.com/ev3dev/ev3dev/wiki">
                                    Wiki
                                    <i class="fa fa-external-link external-link-nav-icon" aria-hidden="true"></i>
                                </a>
                            </li>
                            <li>
                                <a href="/ev3dev.github.io/docs">More...</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="/ev3dev.github.io/support" title="Get Help with ev3dev">Support</a>
                    </li>
                    <li>
                        <a href="/ev3dev.github.io/news" title="ev3dev news">News</a>
                    </li>
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            Community
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="/ev3dev.github.io/contribute" title="How to contribute to ev3dev">Contribute</a>
                            </li>
                            <li>
                                <a href="/ev3dev.github.io/share" title="Share the word on ev3dev with others">Share</a>
                            </li>
                            <li>
                                <a href="/ev3dev.github.io/projects" title="Discover projects that use ev3dev">Project showcase</a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <!-- items below float right, so appear in reverse order -->
                <div id="search-container">
                    <form class="navbar-form navbar-right dropdown" onsubmit="return false;">
                        <input type="text" id="search-input" class="form-control" placeholder="Quick nav" autocomplete="off" />
                        <div class="dropdown-menu" id="search-dropdown">
                            <div class="search-results-container" id="search-no-data-warning">
                                <span class="glyphicon glyphicon-alert heading-icon" aria-hidden="true"></span>
                                We were unable to retrieve search data from the
                                server. Make sure that JavaScript is enabled and
                                that nothing is blocking network access.
                            </div>

                            <div class="search-results-container" id="search-results-docs">
                                <h2>In docs</h2>
                                <div data-content="docs-results">
                                    <div class="no-results-note">No results</div>
                                </div>
                            </div>

                            <div class="search-results-container" id="search-results-projects">
                                <h2>In projects</h2>
                                <div data-content="project-results">
                                    <div class="no-results-note">No results</div>
                                </div>
                            </div>

                            <div class="search-results-container" id="search-results-news">
                                <h2>In news</h2>
                                <div data-content="news-results">
                                    <div class="no-results-note">No results</div>
                                </div>
                            </div>

                            <div class="search-results-container" id="search-results-misc">
                                <h2>In other pages</h2>
                                <div data-content="misc-results">
                                    <div class="no-results-note">No results</div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </nav>
</div>

    
    
    <div class="container">
        

<div class="page-header">
    
        <a class="btn btn-primary pull-right" href="https://github.com/ev3dev/ev3dev.github.io/edit/master/docs/tutorials/using-ev3-leds.md"><span class="glyphicon glyphicon-pencil"></span> Edit on Github</a>
    
    <h1>
        Using the EV3 LEDs
        <small></small>
    </h1>
</div>
    </div>
    
    
    <div class="container">
    
        <hr />
<div class="nav-dropdown-arrow">
    <div>
        

<ol class="breadcrumb" vocab="http://schema.org" typeof="BreadcrumbList">
    
    

    
        

        
        

        <li property="itemListElement" typeof="ListItem" class="">
            <a href="/ev3dev.github.io/docs/" property="item" typeof="WebPage">
                <span property="name">Documentation</span>
            </a>
            <meta property="position" content="1">
        </li>
        
    
        

        
        

        <li property="itemListElement" typeof="ListItem" class="">
            <a href="/ev3dev.github.io/docs/tutorials/" property="item" typeof="WebPage">
                <span property="name">Tutorials</span>
            </a>
            <meta property="position" content="2">
        </li>
        
    
        

        
        

        <li property="itemListElement" typeof="ListItem" class="active">
            <span href="/ev3dev.github.io/docs/tutorials/" property="item" typeof="WebPage">
                <span property="name">Using the EV3 LEDs</span>
            </span>
            <meta property="position" content="3">
        </li>
        
    
</ol>
    </div>
    
</div>
<hr />

<ul id="markdown-toc">
  <li><a href="#basics" id="markdown-toc-basics">Basics</a></li>
  <li><a href="#triggers" id="markdown-toc-triggers">Triggers</a></li>
  <li><a href="#what-about-amberorange" id="markdown-toc-what-about-amberorange">What about amber/orange?</a></li>
</ul>

<h3 id="basics">Basics</h3>

<p>When the EV3 is booting, the LEDs flash amber (orange). When it is finished
booting, they turn solid green. This functionality is hard-coded in the kernel
and in Brickman.</p>

<p>After the boot is complete, you can control the LEDs yourself. The LEDs live in
<code class="highlighter-rouge">/sys/class/leds/</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">ls</span> /sys/class/leds/
ev3:left:green:ev3dev  ev3:right:green:ev3dev
ev3:left:red:ev3dev    ev3:right:red:ev3dev
</code></pre></div></div>

<p>You probably noticed that <em>amber</em> is missing here. We will get to that in a bit.</p>

<p>Each LED has its own attributes for controlling it. We are using the standard
Linux LED device class, so there is a bunch of extra stuff that it not really
useful. Let’s figure out what is…</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">ls</span> /sys/class/leds/ev3:left<span class="se">\:</span>green<span class="se">\:</span>ev3dev
brightness  device  max_brightness  power subsystem  trigger  uevent
</code></pre></div></div>

<p class="alert alert-info"><span class="glyphicon glyphicon-info-sign " aria-hidden="true"></span>
You only have to escape the colons using the backslash (<code class="highlighter-rouge">\:</code>) when using a command
line shell. The actual directory name is <code class="highlighter-rouge">ev3:left:green:ev3dev</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># turn the left green LED off</span>
<span class="nv">$ </span><span class="nb">echo </span>0 <span class="o">&gt;</span> /sys/class/leds/ev3:left<span class="se">\:</span>green<span class="se">\:</span>ev3dev/brightness
<span class="c"># find out what the maximum brightness value is</span>
<span class="nv">$ </span><span class="nb">cat</span> /sys/class/leds/ev3:left<span class="se">\:</span>green<span class="se">\:</span>ev3dev/max_brightness
255
<span class="c"># turn the left green LED back on (255 means 100%)</span>
<span class="nv">$ </span><span class="nb">echo </span>255 <span class="o">&gt;</span> /sys/class/leds/ev3:left<span class="se">\:</span>green<span class="se">\:</span>ev3dev/brightness
<span class="c"># dim the left green LED 1/2 way</span>
<span class="nv">$ </span><span class="nb">echo </span>127 <span class="o">&gt;</span> /sys/class/leds/ev3:left<span class="se">\:</span>green<span class="se">\:</span>ev3dev/brightness
</code></pre></div></div>

<p class="alert alert-info"><span class="glyphicon glyphicon-info-sign " aria-hidden="true"></span>
You you must be a member of the <code class="highlighter-rouge">ev3dev</code> group (or root) to be able to control the LEDs.</p>

<h3 id="triggers">Triggers</h3>

<p>Triggers can make the LED do interesting things.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> /sys/class/leds/ev3:left<span class="se">\:</span>green<span class="se">\:</span>ev3dev/trigger
<span class="o">[</span>none] mmc0 timer heartbeat default-on transient
legoev3-battery-charging-or-full legoev3-battery-charging legoev3-battery-full
legoev3-battery-charging-blink-full-solid rfkill0
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">none</code> means we are manually controlling the LED with <code class="highlighter-rouge">brightness</code> like we just did.</li>
  <li><code class="highlighter-rouge">mmc0</code> makes the LED blink whenever there is SD card activity. This is what the
LEDs were doing during boot.</li>
  <li>
    <p><code class="highlighter-rouge">timer</code> makes the LED blink periodically. When we change the trigger, we get
new attributes for controlling the on and off times. Times are in milliseconds.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">echo </span>timer <span class="o">&gt;</span> /sys/class/leds/ev3:left<span class="se">\:</span>green<span class="se">\:</span>ev3dev/trigger
<span class="nv">$ </span><span class="nb">ls</span> /sys/class/leds/ev3:left<span class="se">\:</span>green<span class="se">\:</span>ev3dev
brightness  delay_on  max_brightness  subsystem  uevent
delay_off   device    power	      trigger
<span class="nv">$ </span><span class="nb">cat</span> /sys/class/leds/ev3:left<span class="se">\:</span>green<span class="se">\:</span>ev3dev/delay_on
500
<span class="nv">$ </span><span class="nb">echo </span>1000 <span class="o">&gt;</span> /sys/class/leds/ev3:left<span class="se">\:</span>green<span class="se">\:</span>ev3dev/delay_on
<span class="nv">$ </span><span class="nb">echo </span>2000 <span class="o">&gt;</span> /sys/class/leds/ev3:left<span class="se">\:</span>green<span class="se">\:</span>ev3dev/delay_off
</code></pre></div>    </div>
  </li>
  <li><code class="highlighter-rouge">heartbeat</code> makes the LED blink at a rate proportional to CPU usage.</li>
  <li><code class="highlighter-rouge">default-on</code> works just like <code class="highlighter-rouge">none</code> except that it turns the LED on instead of
 off when the trigger is set.</li>
  <li><code class="highlighter-rouge">legoev3-battery-*</code> are not useful. The batteries (including the rechargeable
battery pack) do not have a way of telling the EV3 what is going on, so it is
assumed that the batteries are always discharging. Therefore these triggers
will always turn the LED off.</li>
  <li><code class="highlighter-rouge">rfkill0</code> is the RF (radio frequency) kill switch for the built-in Bluetooth.
It should make the LED indicate if the built-in Bluetooth is turned on or not.</li>
</ul>

<h3 id="what-about-amberorange">What about amber/orange?</h3>

<p>To make the LED amber, we just have to turn on both the red and green LEDs at the same time.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># make left LED illuminate amber</span>
<span class="nv">$ </span><span class="nb">echo </span>255 <span class="o">&gt;</span> /sys/class/leds/ev3:left<span class="se">\:</span>green<span class="se">\:</span>ev3dev/brightness<span class="p">;</span> <span class="nb">echo </span>255 <span class="o">&gt;</span> /sys/class/leds/ev3:left<span class="se">\:</span>red<span class="se">\:</span>ev3dev/brightness
<span class="c"># turn off left LED</span>
<span class="nv">$ </span><span class="nb">echo </span>0 <span class="o">&gt;</span> /sys/class/leds/ev3:left<span class="se">\:</span>green<span class="se">\:</span>ev3dev/brightness<span class="p">;</span> <span class="nb">echo </span>0 <span class="o">&gt;</span> /sys/class/leds/ev3:left<span class="se">\:</span>red<span class="se">\:</span>ev3dev/brightness
</code></pre></div></div>

<p>How does red + green make amber? If you open up your favorite paint program that
has a color chooser where you can adjust the individual red, green and blue values,
we can see what is going on. Make sure blue is on zero, then change red and green
both to their maximum values. You get yellow. On the EV3, the red LED is a bit
stronger than than the green LED, so both LEDs at max brightness appears orange
(which we are calling amber just because it is “supposed” to be sort of yellow-ish).
In your paint program, if you leave red at the maximum value and start decreasing
green, the color will start to turn orange and then red. So, playing around with
the <code class="highlighter-rouge">brightness</code> values a bit, we can actually get orange and yellow.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># make the left LED really orange</span>
<span class="nv">$ </span><span class="nb">echo </span>180 <span class="o">&gt;</span> /sys/class/leds/ev3:left<span class="se">\:</span>green<span class="se">\:</span>ev3dev/brightness<span class="p">;</span> <span class="nb">echo </span>255 <span class="o">&gt;</span> /sys/class/leds/ev3:left<span class="se">\:</span>red<span class="se">\:</span>ev3dev/brightness
<span class="c"># make the left LED yellow (this shows us how much stronger the red led is!)</span>
<span class="nv">$ </span><span class="nb">echo </span>255 <span class="o">&gt;</span> /sys/class/leds/ev3:left<span class="se">\:</span>green<span class="se">\:</span>ev3dev/brightness<span class="p">;</span> <span class="nb">echo </span>25 <span class="o">&gt;</span> /sys/class/leds/ev3:left<span class="se">\:</span>red<span class="se">\:</span>ev3dev/brightness
</code></pre></div></div>



    
    </div>
    
    <div id="footer">

        <div class="cclicense">
    
            <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">
                www.ev3dev.org (with the exception of the projects pages)
            </span>
            is licensed under
            <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
                <img alt="Creative Commons License" style="border-width:0" src="https://licensebuttons.net/l/by-sa/4.0/80x15.png" />
            </a>.
            <br />
            You are free to copy the text and images, but please be courteous and acknowledge the source.
    
        </div>

    <br />
    <div class="container">
        <span>
            LEGO® is a trademark of the LEGO Group of companies which does not sponsor, authorize or endorse this site
        </span>
    </div>
</div>

    

<!-- Custom styles -->
<link rel="stylesheet" href="/ev3dev.github.io/stylesheets/search.css">
<link rel="stylesheet" href="/ev3dev.github.io/stylesheets/page-content.css">
<link rel="stylesheet" href="/ev3dev.github.io/stylesheets/user-cards.css">
<link rel="stylesheet" href="/ev3dev.github.io/stylesheets/tabs.css">

<!-- Python code highlighting -->
<link rel="stylesheet" href="/ev3dev.github.io/stylesheets/pygments/monokai.css" />

<!-- 3rd-party libraries -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script src="/ev3dev.github.io/javascripts/bootstrap/bootstrap.min.js"></script>
<script src="/ev3dev.github.io/javascripts/autotrack.js"></script>
<script src="/ev3dev.github.io/javascripts/jquery.getUrlParam.js"></script>
<script src="/ev3dev.github.io/javascripts/jquery.loadTemplate-1.4.4.min.js"></script>
<script src="/ev3dev.github.io/javascripts/respond.js"></script>
<script src="/ev3dev.github.io/javascripts/ua-parser.min.js"></script>
<script src="https://unpkg.com/imagesloaded@4.1/imagesloaded.pkgd.min.js"></script>


<!-- Caches data from requests to API endpoints -->
<script src="/ev3dev.github.io/javascripts/api-cache.js"></script>
<!-- Loads user-cards from GH API -->
<script src="/ev3dev.github.io/javascripts/cards.js"></script>
<!-- Configures special anchors to link to the most recent ev3dev release -->
<script src="/ev3dev.github.io/javascripts/releases.js"></script>
<!-- Responds to queries typed into the "Quick nav" box -->
<script src="/ev3dev.github.io/javascripts/search.js"></script>
<!-- Converts static descriptors of tab target content into live text and links -->
<script src="/ev3dev.github.io/javascripts/tabs.js"></script>
<!-- Adds classes and other styles to pages where hard-coded css can't be used -->
<script src="/ev3dev.github.io/javascripts/style-helpers.js"></script>
</body>
</html>

